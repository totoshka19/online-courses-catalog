// =================================================================================
// 1. ПЕРЕМЕННЫЕ И МИКСИНЫ
// =================================================================================

// Цвета
$color-dark: #1E212C;
$color-text: #424551;
$color-gray: #787A80;
$color-accent: #FF3F3A;
$color-white: #FFFFFF;
$color-border: #E5E8ED;

// Цвета для категорий (понадобятся в JS, но определим их здесь)
$color-marketing: #03A89E;
$color-management: #5A87FC;
$color-hr: #F89828;
$color-design: #F52F6E;
$color-development: #7772F1;

// Типографика
$font-main: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;

// Размеры
$container-width: 1230px;
$gap: 30px;
$border-radius: 4px;


// =================================================================================
// 2. БАЗОВЫЕ СТИЛИ И ОБНУЛЕНИЕ
// =================================================================================

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: $font-main;
  background-color: $color-white;
  color: $color-text;
  font-size: 16px;
  line-height: 1.6; // 160%
}

h1, h2, h3, p, ul {
  margin: 0;
  padding: 0;
}

ul {
  list-style: none;
}

img {
  display: block;
  max-width: 100%;
  height: auto;
}

button {
  padding: 0;
  border: none;
  background-color: transparent;
  cursor: pointer;
  font-family: inherit;
  color: inherit;
}


// =================================================================================
// 3. ОСНОВНОЙ БЛОК: COURSES
// =================================================================================

.courses {
  // Плавные вертикальные отступы
  padding: clamp(40px, 8vw, 80px) 0;

  &__container {
    max-width: $container-width;
    margin: 0 auto;
    padding: 0 15px; // Отступы по бокам для мобильных
  }

  &__header {
    text-align: center;
    margin-bottom: 60px;
  }

  &__subtitle {
    font-weight: 700;
    line-height: 1.5;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: $color-dark;
    margin-bottom: 8px;
  }

  &__title {
    // Плавное изменение размера шрифта
    font-size: clamp(28px, 5vw, 46px);
    font-weight: 900;
    line-height: 1.3;
    color: $color-dark;
  }

  &__controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap; // Позволяет переноситься на новую строку
    margin-bottom: 40px;
  }

  &__filter-list {
    display: flex;
    flex-wrap: wrap; // Кнопки тоже смогут переноситься
    gap: 12px;
  }

  &__filter-btn {
    padding: 9px 16px; // 1px border + 8px padding
    border: 1px solid $color-gray;
    border-radius: $border-radius;
    font-weight: 700;
    line-height: 1.5;
    transition: all 0.3s ease;

    &:hover {
      border-color: $color-accent;
      color: $color-accent;
    }

    // Модификатор для активной кнопки
    &--active {
      border-color: $color-accent;
      color: $color-accent;
      background-color: rgba($color-accent, 0.1);
    }
  }

  &__search-input {
    border: 1px solid $color-border;
    border-radius: $border-radius;
    padding: 10px 16px;
    padding-right: 40px; // Место для иконки
    min-width: 280px;
    line-height: 1.5;
    outline: none;
    transition: border-color 0.3s ease;

    &:focus {
      border-color: $color-accent;
    }

    &::placeholder {
      color: $color-gray;
    }
  }

  &__search-form {
    position: relative;

    // Иконка поиска через псевдоэлемент
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      right: 16px;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15.707 14.293L12.487 11.073C13.439 9.874 14 8.364 14 6.75C14 3.023 10.977 0 7.25 0C3.523 0 0.5 3.023 0.5 6.75C0.5 10.477 3.523 13.5 7.25 13.5C8.864 13.5 10.374 12.939 11.573 11.987L14.793 15.207C14.988 15.402 15.244 15.5 15.5 15.5C15.756 15.5 16.012 15.402 16.207 15.207C16.598 14.816 16.598 14.184 16.207 13.793L15.707 14.293ZM2.5 6.75C2.5 4.129 4.629 2 7.25 2C9.871 2 12 4.129 12 6.75C12 9.371 9.871 11.5 7.25 11.5C4.629 11.5 2.5 9.371 2.5 6.75Z' fill='%23787A80'/%3E%3C/svg%3E%0A");
      background-repeat: no-repeat;
    }
  }

  &__grid {
    display: grid;
    gap: $gap;
    // Главная магия адаптивности сетки
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }

  &__footer {
    display: flex;
    justify-content: center;
    margin-top: 60px;
  }

  &__load-more-btn {
    padding: 15px 40px;
    border: 1px solid $color-accent;
    border-radius: $border-radius;
    font-weight: 700;
    line-height: 1.5;
    color: $color-accent;
    transition: all 0.3s ease;

    &:hover {
      background-color: $color-accent;
      color: $color-white;
    }
  }
}

// Медиа-запрос для улучшения вида на мобильных
@media (max-width: 820px) {
  .courses__controls {
    flex-direction: column;
    align-items: stretch; // Растягиваем элементы на всю ширину
  }
  .courses__filter-list {
    justify-content: center; // Центрируем кнопки
  }
}


// =================================================================================
// 4. БЛОК КАРТОЧКИ КУРСА: COURSE-CARD
// =================================================================================

.course-card {
  border: 1px solid $color-border;
  border-radius: $border-radius;
  overflow: hidden;
  background-color: $color-white;
  display: flex;
  flex-direction: column;
  transition: box-shadow 0.3s ease, transform 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px -5px rgba($color-dark, 0.1), 0 5px 15px -8px rgba($color-dark, 0.08);
  }

  &__image-wrapper {
    position: relative;
  }

  &__image {
    width: 100%;
    height: 214px;
    object-fit: cover; // Изображение всегда заполняет блок без искажений
  }

  &__category {
    position: absolute;
    top: 12px;
    left: 12px;
    padding: 2px 8px;
    border-radius: $border-radius;
    font-size: 14px;
    font-weight: 400;
    color: $color-white;
    // Цвет фона будет задаваться через JS, но зададим дефолтный
    background-color: $color-gray;

    // Модификаторы для цвета фона
    &--marketing { background-color: #03CEA4; }
    &--management { background-color: #5A87FC; }
    &--hr-recruiting { background-color: #F89828; }
    &--design { background-color: #F52F6E; }
    &--development { background-color: #7772F1; }

  }

  &__body {
    padding: 20px;
    flex-grow: 1; // Заставляет этот блок расти, чтобы подвал был всегда внизу
    display: flex;
    flex-direction: column;
  }

  &__title {
    font-size: 20px;
    line-height: 1.3;
    font-weight: 700;
    color: $color-dark;
    min-height: 52px; // 2 строки * 20px * 1.3 = 52px. Предотвращает "прыжки" высоты карточки
    margin-bottom: 20px;
    flex-grow: 1; // Занимает все доступное место, отодвигая подвал вниз

    // Обрезка текста до 2-х строк
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  &__meta {
    display: flex;
    align-items: center;
    color: $color-gray;
  }

  &__price {
    font-size: 18px;
    font-weight: 700;
    color: $color-accent;
    margin-right: 12px;
  }

  &__author {
    position: relative;
    padding-left: 12px;
    // Разделитель через псевдоэлемент
    &::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 1px;
      height: 12px;
      background-color: $color-border;
    }
  }
}
